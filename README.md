## 1. 赛题说明

赛题：

<https://code.aliyun.com/middlewarerace2018/queuerace2018.git>   

​       复赛的赛题的是20亿条消息，每个消息长度58字节，这些消息分属于100万个队列，每个队列2000条消息，然后设计一个put方法将其存储起来，还有一个get方法能够获取消息。

## 2. 思路说明

​       因为读取消息的时候是每个队列连续读取10条消息，因此我的方案是将每个队列的10条消息现在内存中存起来，也就是100万*10条消息，每条消息58字节，一共553M，然后一次阻塞写入磁盘，读取消息的时候每次读取出来512k的消息。

## 3. 问题优化

1. 写入是阻塞写入，也就是缓存了500多M消息之后，阻塞的写入磁盘，效率不高，最好用异步写入的方式。

2. 读取消息的时候，如果是顺序读，因为赛题设定每次消费10条消息，因此我的方案效率较高，但对于随机读，效率较差。